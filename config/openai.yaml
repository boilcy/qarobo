# QARobo Pipeline Configuration
# 机器人管道配置文件

# Transport 配置
transport:
  type: "local_audio"
  params:
    audio_in_enabled: true
    audio_out_enabled: true
    input_device_index: 1
    # VAD 配置
    vad:
      sample_rate: 16000
      stop_secs: 0.2

# STT (Speech-to-Text) 配置
stt:
  type: "whisper"  # 可选: whisper, deepgram
  params:
    model: "G:/models/faster-whisper-base"
    language: "zh"

# LLM 配置
llm:
  type: "openai"  # 可选: openai, deepseek
  params:
    # OpenAI 配置
    base_url: "${oc.env:OPENAI_BASE_URL}"
    api_key: "${oc.env:OPENAI_API_KEY}"
    model: "gpt-4o-mini"
    temperature: 0.5
    max_tokens: 1000
    top_p: 1
    frequency_penalty: 0
    presence_penalty: 0
  
  # DeepSeek 配置 (当 type: deepseek 时使用)
  # params:
  #   api_key: "${oc.env:DEEPSEEK_API_KEY}"
  #   model: "deepseek-chat"

# TTS (Text-to-Speech) 配置
tts:
  type: "kokoro"  # 可选: kokoro, deepgram
  params:
    # Kokoro 配置
    model_name: "G:/models/Kokoro-82M-v1.1-zh"
    voice: "zf_001"
    use_speed_adjustment: false
  
  # Deepgram 配置 (当 type: deepgram 时使用)
  # params:
  #   api_key: "${oc.env:DEEPGRAM_API_KEY}"
  #   voice: "aura-asteria-zh"

# 函数调用配置
functions:
  enabled: true
  enabled_groups:
    - "calculator"  # 计算器函数组
    # - "weather"   # 天气函数组（未来可添加）
    # - "search"    # 搜索函数组（未来可添加）

# 唤醒词配置
wake_check:
  enabled: true
  wake_words:
    - "你好"
    - "你好, 小白"
  idle_words:
    - "再見"
    - "拜拜"
    - "拜拜了"
    - "拜拜了您"
  wake_timeout: 30
  audio:
    wake_sound: "src/sync/data/wake.wav"
    idle_sound: "src/sync/data/idle.wav"
    volume: 0.8

# 中断策略配置
interruption_strategies:
  - type: "keyword"
    params:
      keywords: ["小白小白", "停下"]
  
  - type: "min_words"
    params:
      min_words: 4
  
  # 永不中断策略 - 禁用所有中断（如需禁用中断，使用此策略）
  # - type: "never"

# 系统提示词配置
system_prompt: >
  你是一个有帮助的AI助手。
  你的目标是以简洁的方式展示你的能力。
  你的输出会被转换为语音，所以不要在答案中包含特殊字符。
  你有以下功能可以使用：
  1. 计算器功能：可以进行加减乘除运算。
  以创造性和有帮助的方式回应用户所说的话。

# 欢迎消息配置
welcome_message: "Please introduce yourself to the user."

# Pipeline 配置
pipeline:
  enable_metrics: true
  enable_usage_metrics: true
  idle_timeout_secs: 300

# 日志配置
logging:
  level: "DEBUG"
  log_dir: "logs"

